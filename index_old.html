<!DOCTYPE html>
<html>

  <body>
    <div class="container">
      <div class="row">
        <hr/>
        <br/>
        <!-- Data load and clear links -->

        <div class = "row">
          <div class="six columns center" href="javascript:loadState(exampleData)">
            <a href="javascript:loadState(exampleData)">Click here to load some example data.</a>
            <br/>
            <br/>
          </div>

          <div class="six columns center" href="javascript:loadState(exampleData)">
            <a href="javascript:loadState(emptyStateJson)">Click here to clear all data.</a>
            <br/>
            <br/>
          </div>
        </div>

        <hr/>
        <br/>
        <!-- User inputs for asset classes and accounts -->

        <div class="row center">
          <h5 class="no-margin">Desired Asset Allocation:</h5>
          <span>Total: <span data-bind="text: percentAllocated"></span>%</span>
          <br/>
          <br/>
          <p>
            <strong>Tax inefficient assets</strong>
            <br/>
            (Assets which primarily earn via non-qualified dividends):
          </p>
          <div data-bind="template: { name: 'asset-class-template', foreach: assetClassesInefficient }"></div>
          <button data-bind="click: newInefficientAssetClass">+</button>
          <br/>
          <br/>

          <p>
            <strong>Foreign and tax-exempt assets</strong>
            <br/>
            (Assets eligible for a US tax credit on foreign tax, 
            <br/>
            or those which are entirely tax-exempt):
          </p>
          <div data-bind="template: { name: 'asset-class-template', foreach: assetClassesCredit }"></div>
          <button data-bind="click: newCreditAssetClass">+</button>
          <br/>
          <br/>

          <p>
            <strong>All other assets</strong>,
            <br/>
            with highest expected growth at the top
            <br/>
            (Assets which generally earn via qualified dividends and/or capital gains):
          </p>
          <div data-bind="template: { name: 'asset-class-template', foreach: assetClassesEfficient }"></div>
          <button data-bind="click: newEfficientAssetClass">+</button>
        </div>

        <br/>
        <hr/>
        <br/>

        <div class="row center">
          <h5 class="no-margin">Available Accounts:</h5>
          <span>Total: $<span data-bind="text: totalAccountBalance"></span></span>
          <br/>
          <br/>
          <p>
            <strong>Taxable accounts:</strong>
          </p>
          <div data-bind="template: { name: 'account-template', foreach: accountsTaxable }"></div>
          <button data-bind="click: newTaxableAccount">+</button>
          <br/>
          <br/>

          <p>
            <strong>Tax deferred accounts:</strong>
          </p>
          <div data-bind="template: { name: 'account-template', foreach: accountsDeferred }"></div>
          <button data-bind="click: newDeferredAccount">+</button>
          <br/>
          <br/>

          <p>
            <strong>Tax free accounts:</strong>
          </p>
          <div data-bind="template: { name: 'account-template', foreach: accountsFree }"></div>
          <button data-bind="click: newFreeAccount">+</button>
        </div>

        <br/>
        <hr/>
        <br/>

        <!-- The output table -->

        <div class="row">
          <div class="center">
            <h5 class="no-margin">Suggested Asset Allocation:</h5>
          </div>
          <table id="allocation-view">
            <thead>
              <tr data-bind="foreach: computedAllocationHeaders">
                <th data-bind="text: $data"></th>
              </tr>
            </thead>
            <tbody data-bind="foreach: computedAllocation">
              <tr data-bind="foreach: $data">
                <td data-bind="text: $data"></td>
              </tr>
            </tbody>
          </table>
          <br/>
        </div>

        <!-- The save button -->

        <div class="row center">
          <button id="save-btn" class="button-primary" onClick="toggleUrlLink();">save</button>
          <div id="save-complete-prompt" style="display:none;">
            Simply bookmark this page when ready! The URL bar automatically updates when there are changes. 
            <br/>
            <a id="save-link" href="">As a shortcut, you can bookmark or share this link.</a>
          </div>
        </div>
      </div>
    </div>
    <br/>
    <br/>
    <br/>
    <div class="row center">
      By <a href="http://www.chrisjeakle.com"> Chris Jeakle.</a>
      &nbsp;&nbsp;&nbsp;///&nbsp;&nbsp;&nbsp;
      <a href="https://github.com/cjjeakle/rebalance-calc">View project source.</a>
    </div>
    <br/>
    <br/>
    <br/>
  </body>

  <!-- Knockout templates: -->

  <script type="text/html" id="asset-class-template">
    <div class="user-input-row row center">
      <div class="eight columns">
        <input type="text" placeholder="Asset Class" data-bind="value: name"></input>
        <input type="number" min="0" max="100" placeholder="% of Portfolio" data-bind="value: allocation"></input>
        <input type="text" placeholder="Notes" data-bind="value: notes"></input>
      </div>
      <div class="four columns">
        <button data-bind="click: moveUp">▲</button>
        <button data-bind="click: moveDown">▼</button>
        <button data-bind="click: remove">x</button>
      </div>
    </div>
  </script>

  <script type="text/html" id="account-template">
    <div class="user-input-row row center">
      <div class="eight columns">
        <input type="text" placeholder="Account Name" data-bind="value: name"></input>
        <input type="number" min="0" step="0.01" placeholder="Account Balance" data-bind="value: balance"></input>
        <input type="text" placeholder="Notes" data-bind="value: notes"></input>
      </div>
      <div class="four columns">
        <button data-bind="click: moveUp">▲</button>
        <button data-bind="click: moveDown">▼</button>
        <button data-bind="click: remove">x</button>
      </div>
    </div>
  </script>

  <!-- Javascript libraries -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.0/knockout-min.js"></script>

  <!-- The app's Javascript -->
  <script async src="static/js/ui.js"></script>
  <script async defer src="static/js/main.js"></script>
</html>